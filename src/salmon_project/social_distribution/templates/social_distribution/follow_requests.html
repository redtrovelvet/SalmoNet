{% extends 'social_distribution/base.html' %}

{% block content %}
<div class="content">
    <h1>Follow Requests</h1>
    {% if follow_requests %}
        <ul>
            {% for req in follow_requests %}
                <li>
                    {{ req.sender.display_name }} ({{ req.sender.username }}) wants to follow you.
                    <!-- Approve form -->
                    <form method="post" action="{% url 'approve_follow_request' req.id %}" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit">Approve</button>
                    </form>
                    <!-- Deny form -->
                    <form method="post" action="{% url 'deny_follow_request' req.id %}" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit">Deny</button>
                    </form>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No follow requests.</p>
    {% endif %}
    
    <h2>Notifications</h2>
    {% if like_notifications %}
        <ul>
            {% for notification in like_notifications %}
                {% if notification.type == "like" %}
                    <li>
                        {{ notification.author.display_name }} ({{ notification.author.username }}) liked <a href="{{ notification.post_url }}">your post</a> on {{ notification.published|date:"F j, Y, g:i a" }}.
                    </li>
                {% elif notification.type == "comment" %}
                    <li>
                        {{ notification.author.display_name }} ({{ notification.author.username }}) commented: "{{ notification.comment|safe }}" on <a href="{{ notification.post_url }}">your post</a> on {{ notification.published|date:"F j, Y, g:i a" }}.
                    </li>
                {% elif notification.type == "like_comment" %}
                    <li>
                        {{ notification.author.display_name }} ({{ notification.author.username }}) liked your comment: "{{ notification.liked_comment|safe }}" on <a href="{{ notification.post_url }}">your post</a> on {{ notification.published|date:"F j, Y, g:i a" }}.
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    {% else %}
        <p>No notifications.</p>
    {% endif %}
    
</div>
{% endblock %}
