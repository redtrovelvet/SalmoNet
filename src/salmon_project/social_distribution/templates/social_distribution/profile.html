{% extends 'social_distribution/base.html' %}

{% block title %}{{ author.username }}{% endblock %}

{% block content %}
    {# Display the profile image if available #}
    {% if author.profile_image %}
        <img src="{{ author.profile_image.url }}" alt="Profile Picture" width="150">
    {% endif %}

    <h1>{{ author.display_name }}</h1>

    {# Display GitHub link if available #}
    {% if author.github %}
        <p>GitHub: <a href="{{ author.github }}" target="_blank">{{ author.github }}</a></p>
    {% endif %}

    {# If the logged-in user is viewing their own profile, show the edit link #}
    {% if user.is_authenticated and user.author.id == author.id %}
        <a href="{% url 'edit_profile' author.id %}">Edit Profile</a>
    {% endif %}

    <h2>Posts</h2>

    {# Loop over posts; if there are none, show a fallback message #}
    {% if posts %}
        {% for post in posts %}
            <div class="post">
                {% if post.text %}
                    <p>{{ post.text }}</p>
                {% endif %}
                {% if post.image %}
                    <img src="{{ post.image.url }}" alt="Post Image" width="300">
                {% endif %}
                <p>Posted on {{ post.created_at }}</p>
            </div>
        {% endfor %}
    {% else %}
        <p>No posts available.</p>
    {% endif %}
{% endblock %}
